# drf_coursework

Адрес сервера с развернутым приложением: 130.193.35.133:8000

Запуск проекта локально:
- Клонируйте репозиторий https://github.com/matveinovikov1000/drf_coursework;
- Создайте файл .env c переменными окружения по аналогии с файлом .env.example;
- Создайте БД PostgreSQL

Запуск проекта на сервере:
- Настройте доступ к серверу по ssh;
- Настройте сервер:
  - обновите список пакетов;
  - обновите установленные пакеты.
- Установите Docker в соответсвии с ОС на сервере https://docs.docker.com/engine/;
- Создайте файл .env c переменными окружения по аналогии с файлом .env.example

Работа с GitHub:
- Создайте репозиторий;
- В Settings репозитория (Settings>Secrets and Variables) зарегистрируйте секреты в соответсвии с файлом .github/workflows/ci.yml;
- Запуште проект с локальной машины в GitHub

  Настройка GitHub Actions:
  1) DOCKER_HUB_TOKEN - токен в зарегистрированном аккаунте DockerHub;
  2) DOCKER_HUB_USERNAME - имя пользователя в зарегистрированном аккаунте DockerHub;
  3) ENV_CONTENT - содержимое файла с переменными окружения .env (см по аналогии с .env.example);
  4) POSTGRES_DB - наименование базы данных;
  5) POSTGRES_PASSWORD - пароль от базы данных;
  6) POSTGRES_USER - имя пользователя базы данных;
  7) SECRET_KEY - SECRET_KEY из config/settings;
  8) SERVER_IP - IP сервера для деплоя приложения;
  9) SSH_KEY - приватная часть ssh ключа для обращения к серверу;
  10) SSH_USER - имя пользователя сервера

Файл ci.yml описывает порядок проводимых процессов в GitHub Actions:
- Работа flake8;
- Запуск тестов;
- Запуск образов Docker;
- Деплой приложения на сервер
- 
Для корректной работы GitHub Actions необходима регистрация аккаунта на DockerHub с генерацией токена
